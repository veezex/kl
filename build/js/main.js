$(document).ready(function(){if(function(s){"use strict";s.fn.emulateTransitionEnd=function(t){var e=!1,i=this;s(this).one("bsTransitionEnd",function(){e=!0});return setTimeout(function(){e||s(i).trigger(s.support.transition.end)},t),this},s(function(){s.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}(),s.support.transition&&(s.event.special.bsTransitionEnd={bindType:s.support.transition.end,delegateType:s.support.transition.end,handle:function(t){if(s(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(u){"use strict";var h=function(t,e){this.$element=u(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=e,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",u.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",u.proxy(this.pause,this)).on("mouseleave.bs.carousel",u.proxy(this.cycle,this))};function o(n){return this.each(function(){var t=u(this),e=t.data("bs.carousel"),i=u.extend({},h.DEFAULTS,t.data(),"object"==typeof n&&n),s="string"==typeof n?n:i.slide;e||t.data("bs.carousel",e=new h(this,i)),"number"==typeof n?e.to(n):s?e[s]():i.interval&&e.pause().cycle()})}h.VERSION="3.3.5",h.TRANSITION_DURATION=600,h.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},h.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},h.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(u.proxy(this.next,this),this.options.interval)),this},h.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},h.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e);if(("prev"==t&&0===i||"next"==t&&i==this.$items.length-1)&&!this.options.wrap)return e;var s=(i+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(s)},h.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(i<t?"next":"prev",this.$items.eq(t))},h.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&u.support.transition&&(this.$element.trigger(u.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},h.prototype.next=function(){if(!this.sliding)return this.slide("next")},h.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},h.prototype.slide=function(t,e){var i=this.$element.find(".item.active"),s=e||this.getItemForDirection(t,i),n=this.interval,a="next"==t?"left":"right",o=this;if(s.hasClass("active"))return this.sliding=!1;var r=s[0],l=u.Event("slide.bs.carousel",{relatedTarget:r,direction:a});if(this.$element.trigger(l),!l.isDefaultPrevented()){if(this.sliding=!0,n&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var c=u(this.$indicators.children()[this.getItemIndex(s)]);c&&c.addClass("active")}var d=u.Event("slid.bs.carousel",{relatedTarget:r,direction:a});return u.support.transition&&this.$element.hasClass("slide")?(s.addClass(t),s[0].offsetWidth,i.addClass(a),s.addClass(a),i.one("bsTransitionEnd",function(){s.removeClass([t,a].join(" ")).addClass("active"),i.removeClass(["active",a].join(" ")),o.sliding=!1,setTimeout(function(){o.$element.trigger(d)},0)}).emulateTransitionEnd(h.TRANSITION_DURATION)):(i.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(d)),n&&this.cycle(),this}};var t=u.fn.carousel;u.fn.carousel=o,u.fn.carousel.Constructor=h,u.fn.carousel.noConflict=function(){return u.fn.carousel=t,this};var e=function(t){var e,i=u(this),s=u(i.attr("data-target")||(e=i.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var n=u.extend({},s.data(),i.data()),a=i.attr("data-slide-to");a&&(n.interval=!1),o.call(s,n),a&&s.data("bs.carousel").to(a),t.preventDefault()}};u(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),u(window).on("load",function(){u('[data-ride="carousel"]').each(function(){var t=u(this);o.call(t,t.data())})})}(jQuery),$(".carousel-item-image .item").each(function(){for(var t=$(this),e=1;e<5;e++)(t=t.next()).length||(t=$(this).siblings(":first")),t.children(":first-child").clone().addClass("cloneditem-"+e).appendTo($(this))}),$(".carousel").carousel({interval:0}),$("#carousel-item-image").carousel({interval:0}),$(".js-hide-filter").on("click",function(t){t.preventDefault();var e=$(this);$(".filter__input-group--add").hasClass("js-isVisible")?($(".filter__input-group--add").removeClass("js-isVisible"),e.removeClass("iSopened")):($(".filter__input-group--add").addClass("js-isVisible"),e.addClass("iSopened"))}),$(".js-map__btn").on("click",function(t){var e=$(this).attr("data-modal");$("#"+e).addClass("isOpened")}),$(".item__img").click(function(){var t=$(this).attr("src");console.log(t),$(".image__container").css("background-image","url("+t+")")}),null!==document.getElementById("map")){ymaps.ready(function(){var t=new ymaps.Map("map",{center:[55.76,37.64],zoom:18,controls:[]}),e=new ymaps.Placemark([55.760584,37.63945],{},{iconLayout:"default#image",iconImageHref:"images/map__baloon.png",iconImageSize:[40,50],iconImageOffset:[-20,-50]}),i=ymaps.templateLayoutFactory.createClass("<div class='map__zoom-block u-jc-sbu-fd-col'><div id='zoom-in' class='map__zoom map__zoom--minus u-jc-ce u-ai-ce'><svg class='svg' width='8px' height='2px' viewBox='0 0 8 2' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><rect id='map__minus' width='8' height='2'></rect></svg></div><br><div id='zoom-out' class='map__zoom u-jc-ce u-ai-ce'><svg class='svg' width='12px' height='12px' viewBox='0 0 12 12' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><g id='Group' ><rect id='Rectangle-3' x='0' y='5' width='12' height='2'></rect><rect id='Rectangle-3' transform='translate(6.000000, 6.000000) rotate(90.000000) translate(-6.000000, -6.000000) ' x='0' y='5' width='12' height='2'></rect></g></svg></div>",{build:function(){i.superclass.build.call(this),this.zoomInCallback=ymaps.util.bind(this.zoomIn,this),this.zoomOutCallback=ymaps.util.bind(this.zoomOut,this),$("#zoom-in").bind("click",this.zoomInCallback),$("#zoom-out").bind("click",this.zoomOutCallback)},clear:function(){$("#zoom-in").unbind("click",this.zoomInCallback),$("#zoom-out").unbind("click",this.zoomOutCallback),i.superclass.clear.call(this)},zoomIn:function(){var t=this.getData().control.getMap();t.setZoom(t.getZoom()+1,{checkZoomRange:!0})},zoomOut:function(){var t=this.getData().control.getMap();t.setZoom(t.getZoom()-1,{checkZoomRange:!0})}}),s=new ymaps.control.ZoomControl({options:{layout:i,position:{left:30,top:465}}});t.controls.add(s),t.geoObjects.add(e)})}$("#modal-close").on("click",function(t){$(this).closest(".js-modal").removeClass("isOpened")}),$(".js-tab__item").on("click",function(t){var e=$(this);e.closest(".tab").find(".js-tab__item").removeClass("js-active"),e.addClass("js-active");var i=e.attr("data-tab");e.closest(".tab").find(".tab__block").removeClass("js-active"),$('[data-content="'+i+'"]').addClass("js-active")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCJmbiIsImVtdWxhdGVUcmFuc2l0aW9uRW5kIiwiZHVyYXRpb24iLCJjYWxsZWQiLCIkZWwiLCJ0aGlzIiwib25lIiwic2V0VGltZW91dCIsInRyaWdnZXIiLCJzdXBwb3J0IiwidHJhbnNpdGlvbiIsImVuZCIsImVsIiwiY3JlYXRlRWxlbWVudCIsInRyYW5zRW5kRXZlbnROYW1lcyIsIldlYmtpdFRyYW5zaXRpb24iLCJNb3pUcmFuc2l0aW9uIiwiT1RyYW5zaXRpb24iLCJuYW1lIiwidW5kZWZpbmVkIiwic3R5bGUiLCJ0cmFuc2l0aW9uRW5kIiwiZXZlbnQiLCJzcGVjaWFsIiwiYnNUcmFuc2l0aW9uRW5kIiwiYmluZFR5cGUiLCJkZWxlZ2F0ZVR5cGUiLCJoYW5kbGUiLCJlIiwidGFyZ2V0IiwiaXMiLCJoYW5kbGVPYmoiLCJoYW5kbGVyIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJqUXVlcnkiLCJDYXJvdXNlbCIsImVsZW1lbnQiLCJvcHRpb25zIiwiJGVsZW1lbnQiLCIkaW5kaWNhdG9ycyIsImZpbmQiLCJwYXVzZWQiLCJzbGlkaW5nIiwiaW50ZXJ2YWwiLCIkYWN0aXZlIiwiJGl0ZW1zIiwia2V5Ym9hcmQiLCJvbiIsInByb3h5Iiwia2V5ZG93biIsInBhdXNlIiwiZG9jdW1lbnRFbGVtZW50IiwiY3ljbGUiLCJQbHVnaW4iLCJvcHRpb24iLCJlYWNoIiwiJHRoaXMiLCJkYXRhIiwiZXh0ZW5kIiwiREVGQVVMVFMiLCJhY3Rpb24iLCJzbGlkZSIsInRvIiwiVkVSU0lPTiIsIlRSQU5TSVRJT05fRFVSQVRJT04iLCJ3cmFwIiwicHJvdG90eXBlIiwidGVzdCIsInRhZ05hbWUiLCJ3aGljaCIsInByZXYiLCJuZXh0IiwicHJldmVudERlZmF1bHQiLCJjbGVhckludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJnZXRJdGVtSW5kZXgiLCJpdGVtIiwicGFyZW50IiwiY2hpbGRyZW4iLCJpbmRleCIsImdldEl0ZW1Gb3JEaXJlY3Rpb24iLCJkaXJlY3Rpb24iLCJhY3RpdmUiLCJhY3RpdmVJbmRleCIsImxlbmd0aCIsIml0ZW1JbmRleCIsImVxIiwicG9zIiwidGhhdCIsInR5cGUiLCIkbmV4dCIsImlzQ3ljbGluZyIsImhhc0NsYXNzIiwicmVsYXRlZFRhcmdldCIsInNsaWRlRXZlbnQiLCJFdmVudCIsImlzRGVmYXVsdFByZXZlbnRlZCIsInJlbW92ZUNsYXNzIiwiJG5leHRJbmRpY2F0b3IiLCJhZGRDbGFzcyIsInNsaWRFdmVudCIsIm9mZnNldFdpZHRoIiwiam9pbiIsIm9sZCIsImNhcm91c2VsIiwiQ29uc3RydWN0b3IiLCJub0NvbmZsaWN0IiwiY2xpY2tIYW5kbGVyIiwiaHJlZiIsIiR0YXJnZXQiLCJhdHRyIiwicmVwbGFjZSIsInNsaWRlSW5kZXgiLCJjYWxsIiwid2luZG93IiwiJGNhcm91c2VsIiwiaXRlbVRvQ2xvbmUiLCJpIiwic2libGluZ3MiLCJjbG9uZSIsImFwcGVuZFRvIiwidmFsIiwiY2xpY2siLCJpbWdTcmMiLCJjb25zb2xlIiwibG9nIiwiY3NzIiwiZ2V0RWxlbWVudEJ5SWQiLCJ5bWFwcyIsIm15TWFwIiwiTWFwIiwiY2VudGVyIiwiem9vbSIsImNvbnRyb2xzIiwicGxhY2VtYXJrIiwiUGxhY2VtYXJrIiwiaWNvbkxheW91dCIsImljb25JbWFnZUhyZWYiLCJpY29uSW1hZ2VTaXplIiwiaWNvbkltYWdlT2Zmc2V0IiwiWm9vbUxheW91dCIsInRlbXBsYXRlTGF5b3V0RmFjdG9yeSIsImNyZWF0ZUNsYXNzIiwiYnVpbGQiLCJzdXBlcmNsYXNzIiwiem9vbUluQ2FsbGJhY2siLCJ1dGlsIiwiYmluZCIsInpvb21JbiIsInpvb21PdXRDYWxsYmFjayIsInpvb21PdXQiLCJjbGVhciIsInVuYmluZCIsIm1hcCIsImdldERhdGEiLCJjb250cm9sIiwiZ2V0TWFwIiwic2V0Wm9vbSIsImdldFpvb20iLCJjaGVja1pvb21SYW5nZSIsInpvb21Db250cm9sIiwiWm9vbUNvbnRyb2wiLCJsYXlvdXQiLCJwb3NpdGlvbiIsImxlZnQiLCJ0b3AiLCJhZGQiLCJnZW9PYmplY3RzIiwiY2xvc2VzdCJdLCJtYXBwaW5ncyI6IkFBQUFBLEVBQUVDLFVBQVVDLE1BQU0sV0FtV2hCLEdBelZDLFNBQVVGLEdBQ1QsYUF5QkFBLEVBQUVHLEdBQUdDLHFCQUF1QixTQUFVQyxHQUNwQyxJQUFJQyxHQUFTLEVBQ1RDLEVBQU1DLEtBQ1ZSLEVBQUVRLE1BQU1DLElBQUksa0JBQW1CLFdBQWNILEdBQVMsSUFHdEQsT0FEQUksV0FEZSxXQUFtQkosR0FBUU4sRUFBRU8sR0FBS0ksUUFBUVgsRUFBRVksUUFBUUMsV0FBV0MsTUFDekRULEdBQ2RHLE1BR1RSLEVBQUUsV0FDQUEsRUFBRVksUUFBUUMsV0E5QlosV0FDRSxJQUFJRSxFQUFLZCxTQUFTZSxjQUFjLGFBRTVCQyxFQUFxQixDQUN2QkMsaUJBQW1CLHNCQUNuQkMsY0FBbUIsZ0JBQ25CQyxZQUFtQixnQ0FDbkJQLFdBQW1CLGlCQUdyQixJQUFLLElBQUlRLEtBQVFKLEVBQ2YsUUFBdUJLLElBQW5CUCxFQUFHUSxNQUFNRixHQUNYLE1BQU8sQ0FBRVAsSUFBS0csRUFBbUJJLElBSXJDLE9BQU8sRUFjZ0JHLEdBRWxCeEIsRUFBRVksUUFBUUMsYUFFZmIsRUFBRXlCLE1BQU1DLFFBQVFDLGdCQUFrQixDQUNoQ0MsU0FBVTVCLEVBQUVZLFFBQVFDLFdBQVdDLElBQy9CZSxhQUFjN0IsRUFBRVksUUFBUUMsV0FBV0MsSUFDbkNnQixPQUFRLFNBQVVDLEdBQ2hCLEdBQUkvQixFQUFFK0IsRUFBRUMsUUFBUUMsR0FBR3pCLE1BQU8sT0FBT3VCLEVBQUVHLFVBQVVDLFFBQVFDLE1BQU01QixLQUFNNkIsZ0JBNUN4RSxDQWlEQ0MsUUFXRCxTQUFVdEMsR0FDVCxhQUtBLElBQUl1QyxFQUFXLFNBQVVDLEVBQVNDLEdBQ2hDakMsS0FBS2tDLFNBQWMxQyxFQUFFd0MsR0FDckJoQyxLQUFLbUMsWUFBY25DLEtBQUtrQyxTQUFTRSxLQUFLLHdC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RUFBRSxZQUFZNEosT0FBTyxRQUFTcEosS0FBSzZJLGdCQUNuQ3JKLEVBQUUsYUFBYTRKLE9BQU8sUUFBU3BKLEtBQUtpSixpQkFHcENULEVBQVdJLFdBQVdPLE1BQU10QyxLQUFLN0csT0FHckNnSixPQUFRLFdBQ0osSUFBSUssRUFBTXJKLEtBQUtzSixVQUFVQyxRQUFRQyxTQUNqQ0gsRUFBSUksUUFBUUosRUFBSUssVUFBWSxFQUFHLENBQUNDLGdCQUFnQixLQUdwRFQsUUFBUyxXQUNMLElBQUlHLEVBQU1ySixLQUFLc0osVUFBVUMsUUFBUUMsU0FDakNILEVBQUlJLFFBQVFKLEVBQUlLLFVBQVksRUFBRyxDQUFDQyxnQkFBZ0IsT0FHcERDLEVBQWMsSUFBSWhDLE1BQU0yQixRQUFRTSxZQUFZLENBQ3hDNUgsUUFBUyxDQUNMNkgsT0FBUXRCLEVBQ1J1QixTQUFVLENBQ05DLEtBQU0sR0FDTkMsSUFBSyxRQUlqQnBDLEVBQU1JLFNBQVNpQyxJQUFJTixHQUNuQi9CLEVBQU1zQyxXQUFXRCxJQUFJaEMsS0FHN0IxSSxFQUFFLGdCQUFnQm1ELEdBQUcsUUFBUSxTQUFTcEIsR0FDeEIvQixFQUFHUSxNQUVUb0ssUUFBUSxhQUFhdkUsWUFBWSxjQUV6Q3JHLEVBQUUsaUJBQWlCbUQsR0FBRyxRQUFRLFNBQVNwQixHQUNyQyxJQUFJNkIsRUFBUTVELEVBQUdRLE1BRWZvRCxFQUFNZ0gsUUFBUSxRQUFRaEksS0FBSyxpQkFBaUJ5RCxZQUFZLGFBQ3hEekMsRUFBTTJDLFNBQVMsYUFFZixJQUFJc0IsRUFBTWpFLEVBQU1zRCxLQUFLLFlBRXJCdEQsRUFBTWdILFFBQVEsUUFBUWhJLEtBQUssZUFBZXlELFlBQVksYUFDdERyRyxFQUFFLGtCQUFrQjZILEVBQUksTUFBTXRCLFNBQVMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAqIEJvb3RzdHJhcDogdHJhbnNpdGlvbi5qcyB2My4zLjVcbiAgICogaHR0cHM6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI3RyYW5zaXRpb25zXG4gICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgKiBDb3B5cmlnaHQgMjAxMS0yMDE1IFR3aXR0ZXIsIEluYy5cbiAgICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcbiAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG4gIFxuICBcbiAgK2Z1bmN0aW9uICgkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICBcbiAgICAvLyBDU1MgVFJBTlNJVElPTiBTVVBQT1JUIChTaG91dG91dDogaHR0cHM6Ly93d3cubW9kZXJuaXpyLmNvbS8pXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIFxuICAgIGZ1bmN0aW9uIHRyYW5zaXRpb25FbmQoKSB7XG4gICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdib290c3RyYXAnKVxuICBcbiAgICAgIHZhciB0cmFuc0VuZEV2ZW50TmFtZXMgPSB7XG4gICAgICAgIFdlYmtpdFRyYW5zaXRpb24gOiAnd2Via2l0VHJhbnNpdGlvbkVuZCcsXG4gICAgICAgIE1velRyYW5zaXRpb24gICAgOiAndHJhbnNpdGlvbmVuZCcsXG4gICAgICAgIE9UcmFuc2l0aW9uICAgICAgOiAnb1RyYW5zaXRpb25FbmQgb3RyYW5zaXRpb25lbmQnLFxuICAgICAgICB0cmFuc2l0aW9uICAgICAgIDogJ3RyYW5zaXRpb25lbmQnXG4gICAgICB9XG4gIFxuICAgICAgZm9yICh2YXIgbmFtZSBpbiB0cmFuc0VuZEV2ZW50TmFtZXMpIHtcbiAgICAgICAgaWYgKGVsLnN0eWxlW25hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICByZXR1cm4geyBlbmQ6IHRyYW5zRW5kRXZlbnROYW1lc1tuYW1lXSB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgXG4gICAgICByZXR1cm4gZmFsc2UgLy8gZXhwbGljaXQgZm9yIGllOCAoICAuXy4pXG4gICAgfVxuICBcbiAgICAvLyBodHRwOi8vYmxvZy5hbGV4bWFjY2F3LmNvbS9jc3MtdHJhbnNpdGlvbnNcbiAgICAkLmZuLmVtdWxhdGVUcmFuc2l0aW9uRW5kID0gZnVuY3Rpb24gKGR1cmF0aW9uKSB7XG4gICAgICB2YXIgY2FsbGVkID0gZmFsc2VcbiAgICAgIHZhciAkZWwgPSB0aGlzXG4gICAgICAkKHRoaXMpLm9uZSgnYnNUcmFuc2l0aW9uRW5kJywgZnVuY3Rpb24gKCkgeyBjYWxsZWQgPSB0cnVlIH0pXG4gICAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7IGlmICghY2FsbGVkKSAkKCRlbCkudHJpZ2dlcigkLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQpIH1cbiAgICAgIHNldFRpbWVvdXQoY2FsbGJhY2ssIGR1cmF0aW9uKVxuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG4gIFxuICAgICQoZnVuY3Rpb24gKCkge1xuICAgICAgJC5zdXBwb3J0LnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uRW5kKClcbiAgXG4gICAgICBpZiAoISQuc3VwcG9ydC50cmFuc2l0aW9uKSByZXR1cm5cbiAgXG4gICAgICAkLmV2ZW50LnNwZWNpYWwuYnNUcmFuc2l0aW9uRW5kID0ge1xuICAgICAgICBiaW5kVHlwZTogJC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kLFxuICAgICAgICBkZWxlZ2F0ZVR5cGU6ICQuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCxcbiAgICAgICAgaGFuZGxlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGlmICgkKGUudGFyZ2V0KS5pcyh0aGlzKSkgcmV0dXJuIGUuaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgXG4gIH0oalF1ZXJ5KTtcbiAgXG4gIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgKiBCb290c3RyYXA6IGNhcm91c2VsLmpzIHYzLjMuNVxuICAgKiBodHRwczovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jY2Fyb3VzZWxcbiAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAqIENvcHlyaWdodCAyMDExLTIwMTUgVHdpdHRlciwgSW5jLlxuICAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICAgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbiAgXG4gIFxuICArZnVuY3Rpb24gKCQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gIFxuICAgIC8vIENBUk9VU0VMIENMQVNTIERFRklOSVRJT05cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09XG4gIFxuICAgIHZhciBDYXJvdXNlbCA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICB0aGlzLiRlbGVtZW50ICAgID0gJChlbGVtZW50KVxuICAgICAgdGhpcy4kaW5kaWNhdG9ycyA9IHRoaXMuJGVsZW1lbnQuZmluZCgnLmNhcm91c2VsLWluZGljYXRvcnMnKVxuICAgICAgdGhpcy5vcHRpb25zICAgICA9IG9wdGlvbnNcbiAgICAgIHRoaXMucGF1c2VkICAgICAgPSBudWxsXG4gICAgICB0aGlzLnNsaWRpbmcgICAgID0gbnVsbFxuICAgICAgdGhpcy5pbnRlcnZhbCAgICA9IG51bGxcbiAgICAgIHRoaXMuJGFjdGl2ZSAgICAgPSBudWxsXG4gICAgICB0aGlzLiRpdGVtcyAgICAgID0gbnVsbFxuICBcbiAgICAgIHRoaXMub3B0aW9ucy5rZXlib2FyZCAmJiB0aGlzLiRlbGVtZW50Lm9uKCdrZXlkb3duLmJzLmNhcm91c2VsJywgJC5wcm94eSh0aGlzLmtleWRvd24sIHRoaXMpKVxuICBcbiAgICAgIHRoaXMub3B0aW9ucy5wYXVzZSA9PSAnaG92ZXInICYmICEoJ29udG91Y2hzdGFydCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSAmJiB0aGlzLiRlbGVtZW50XG4gICAgICAgIC5vbignbW91c2VlbnRlci5icy5jYXJvdXNlbCcsICQucHJveHkodGhpcy5wYXVzZSwgdGhpcykpXG4gICAgICAgIC5vbignbW91c2VsZWF2ZS5icy5jYXJvdXNlbCcsICQucHJveHkodGhpcy5jeWNsZSwgdGhpcykpXG4gICAgfVxuICBcbiAgICBDYXJvdXNlbC5WRVJTSU9OICA9ICczLjMuNSdcbiAgXG4gICAgQ2Fyb3VzZWwuVFJBTlNJVElPTl9EVVJBVElPTiA9IDYwMFxuICBcbiAgICBDYXJvdXNlbC5ERUZBVUxUUyA9IHtcbiAgICAgIGludGVydmFsOiA1MDAwLFxuICAgICAgcGF1c2U6ICdob3ZlcicsXG4gICAgICB3cmFwOiB0cnVlLFxuICAgICAga2V5Ym9hcmQ6IHRydWVcbiAgICB9XG4gIFxuICAgIENhcm91c2VsLnByb3RvdHlwZS5rZXlkb3duID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmICgvaW5wdXR8dGV4dGFyZWEvaS50ZXN0KGUudGFyZ2V0LnRhZ05hbWUpKSByZXR1cm5cbiAgICAgIHN3aXRjaCAoZS53aGljaCkge1xuICAgICAgICBjYXNlIDM3OiB0aGlzLnByZXYoKTsgYnJlYWtcbiAgICAgICAgY2FzZSAzOTogdGhpcy5uZXh0KCk7IGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6IHJldHVyblxuICAgICAgfVxuICBcbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIH1cbiAgXG4gICAgQ2Fyb3VzZWwucHJvdG90eXBlLmN5Y2xlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIGUgfHwgKHRoaXMucGF1c2VkID0gZmFsc2UpXG4gIFxuICAgICAgdGhpcy5pbnRlcnZhbCAmJiBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpXG4gIFxuICAgICAgdGhpcy5vcHRpb25zLmludGVydmFsXG4gICAgICAgICYmICF0aGlzLnBhdXNlZFxuICAgICAgICAmJiAodGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKCQucHJveHkodGhpcy5uZXh0LCB0aGlzKSwgdGhpcy5vcHRpb25zLmludGVydmFsKSlcbiAgXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH1cbiAgXG4gICAgQ2Fyb3VzZWwucHJvdG90eXBlLmdldEl0ZW1JbmRleCA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB0aGlzLiRpdGVtcyA9IGl0ZW0ucGFyZW50KCkuY2hpbGRyZW4oJy5pdGVtJylcbiAgICAgIHJldHVybiB0aGlzLiRpdGVtcy5pbmRleChpdGVtIHx8IHRoaXMuJGFjdGl2ZSlcbiAgICB9XG4gIFxuICAgIENhcm91c2VsLnByb3RvdHlwZS5nZXRJdGVtRm9yRGlyZWN0aW9uID0gZnVuY3Rpb24gKGRpcmVjdGlvbiwgYWN0aXZlKSB7XG4gICAgICB2YXIgYWN0aXZlSW5kZXggPSB0aGlzLmdldEl0ZW1JbmRleChhY3RpdmUpXG4gICAgICB2YXIgd2lsbFdyYXAgPSAoZGlyZWN0aW9uID09ICdwcmV2JyAmJiBhY3RpdmVJbmRleCA9PT0gMClcbiAgICAgICAgICAgICAgICAgIHx8IChkaXJlY3Rpb24gPT0gJ25leHQnICYmIGFjdGl2ZUluZGV4ID09ICh0aGlzLiRpdGVtcy5sZW5ndGggLSAxKSlcbiAgICAgIGlmICh3aWxsV3JhcCAmJiAhdGhpcy5vcHRpb25zLndyYXApIHJldHVybiBhY3RpdmVcbiAgICAgIHZhciBkZWx0YSA9IGRpcmVjdGlvbiA9PSAncHJldicgPyAtMSA6IDFcbiAgICAgIHZhciBpdGVtSW5kZXggPSAoYWN0aXZlSW5kZXggKyBkZWx0YSkgJSB0aGlzLiRpdGVtcy5sZW5ndGhcbiAgICAgIHJldHVybiB0aGlzLiRpdGVtcy5lcShpdGVtSW5kZXgpXG4gICAgfVxuICBcbiAgICBDYXJvdXNlbC5wcm90b3R5cGUudG8gPSBmdW5jdGlvbiAocG9zKSB7XG4gICAgICB2YXIgdGhhdCAgICAgICAgPSB0aGlzXG4gICAgICB2YXIgYWN0aXZlSW5kZXggPSB0aGlzLmdldEl0ZW1JbmRleCh0aGlzLiRhY3RpdmUgPSB0aGlzLiRlbGVtZW50LmZpbmQoJy5pdGVtLmFjdGl2ZScpKVxuICBcbiAgICAgIGlmIChwb3MgPiAodGhpcy4kaXRlbXMubGVuZ3RoIC0gMSkgfHwgcG9zIDwgMCkgcmV0dXJuXG4gIFxuICAgICAgaWYgKHRoaXMuc2xpZGluZykgICAgICAgcmV0dXJuIHRoaXMuJGVsZW1lbnQub25lKCdzbGlkLmJzLmNhcm91c2VsJywgZnVuY3Rpb24gKCkgeyB0aGF0LnRvKHBvcykgfSkgLy8geWVzLCBcInNsaWRcIlxuICAgICAgaWYgKGFjdGl2ZUluZGV4ID09IHBvcykgcmV0dXJuIHRoaXMucGF1c2UoKS5jeWNsZSgpXG4gIFxuICAgICAgcmV0dXJuIHRoaXMuc2xpZGUocG9zID4gYWN0aXZlSW5kZXggPyAnbmV4dCcgOiAncHJldicsIHRoaXMuJGl0ZW1zLmVxKHBvcykpXG4gICAgfVxuICBcbiAgICBDYXJvdXNlbC5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgZSB8fCAodGhpcy5wYXVzZWQgPSB0cnVlKVxuICBcbiAgICAgIGlmICh0aGlzLiRlbGVtZW50LmZpbmQoJy5uZXh0LCAucHJldicpLmxlbmd0aCAmJiAkLnN1cHBvcnQudHJhbnNpdGlvbikge1xuICAgICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kKVxuICAgICAgICB0aGlzLmN5Y2xlKHRydWUpXG4gICAgICB9XG4gIFxuICAgICAgdGhpcy5pbnRlcnZhbCA9IGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbClcbiAgXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH1cbiAgXG4gICAgQ2Fyb3VzZWwucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5zbGlkaW5nKSByZXR1cm5cbiAgICAgIHJldHVybiB0aGlzLnNsaWRlKCduZXh0JylcbiAgICB9XG4gIFxuICAgIENhcm91c2VsLnByb3RvdHlwZS5wcmV2ID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMuc2xpZGluZykgcmV0dXJuXG4gICAgICByZXR1cm4gdGhpcy5zbGlkZSgncHJldicpXG4gICAgfVxuICBcbiAgICBDYXJvdXNlbC5wcm90b3R5cGUuc2xpZGUgPSBmdW5jdGlvbiAodHlwZSwgbmV4dCkge1xuICAgICAgdmFyICRhY3RpdmUgICA9IHRoaXMuJGVsZW1lbnQuZmluZCgnLml0ZW0uYWN0aXZlJylcbiAgICAgIHZhciAkbmV4dCAgICAgPSBuZXh0IHx8IHRoaXMuZ2V0SXRlbUZvckRpcmVjdGlvbih0eXBlLCAkYWN0aXZlKVxuICAgICAgdmFyIGlzQ3ljbGluZyA9IHRoaXMuaW50ZXJ2YWxcbiAgICAgIHZhciBkaXJlY3Rpb24gPSB0eXBlID09ICduZXh0JyA/ICdsZWZ0JyA6ICdyaWdodCdcbiAgICAgIHZhciB0aGF0ICAgICAgPSB0aGlzXG4gIFxuICAgICAgaWYgKCRuZXh0Lmhhc0NsYXNzKCdhY3RpdmUnKSkgcmV0dXJuICh0aGlzLnNsaWRpbmcgPSBmYWxzZSlcbiAgXG4gICAgICB2YXIgcmVsYXRlZFRhcmdldCA9ICRuZXh0WzBdXG4gICAgICB2YXIgc2xpZGVFdmVudCA9ICQuRXZlbnQoJ3NsaWRlLmJzLmNhcm91c2VsJywge1xuICAgICAgICByZWxhdGVkVGFyZ2V0OiByZWxhdGVkVGFyZ2V0LFxuICAgICAgICBkaXJlY3Rpb246IGRpcmVjdGlvblxuICAgICAgfSlcbiAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihzbGlkZUV2ZW50KVxuICAgICAgaWYgKHNsaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVyblxuICBcbiAgICAgIHRoaXMuc2xpZGluZyA9IHRydWVcbiAgXG4gICAgICBpc0N5Y2xpbmcgJiYgdGhpcy5wYXVzZSgpXG4gIFxuICAgICAgaWYgKHRoaXMuJGluZGljYXRvcnMubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuJGluZGljYXRvcnMuZmluZCgnLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxuICAgICAgICB2YXIgJG5leHRJbmRpY2F0b3IgPSAkKHRoaXMuJGluZGljYXRvcnMuY2hpbGRyZW4oKVt0aGlzLmdldEl0ZW1JbmRleCgkbmV4dCldKVxuICAgICAgICAkbmV4dEluZGljYXRvciAmJiAkbmV4dEluZGljYXRvci5hZGRDbGFzcygnYWN0aXZlJylcbiAgICAgIH1cbiAgXG4gICAgICB2YXIgc2xpZEV2ZW50ID0gJC5FdmVudCgnc2xpZC5icy5jYXJvdXNlbCcsIHsgcmVsYXRlZFRhcmdldDogcmVsYXRlZFRhcmdldCwgZGlyZWN0aW9uOiBkaXJlY3Rpb24gfSkgLy8geWVzLCBcInNsaWRcIlxuICAgICAgaWYgKCQuc3VwcG9ydC50cmFuc2l0aW9uICYmIHRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoJ3NsaWRlJykpIHtcbiAgICAgICAgJG5leHQuYWRkQ2xhc3ModHlwZSlcbiAgICAgICAgJG5leHRbMF0ub2Zmc2V0V2lkdGggLy8gZm9yY2UgcmVmbG93XG4gICAgICAgICRhY3RpdmUuYWRkQ2xhc3MoZGlyZWN0aW9uKVxuICAgICAgICAkbmV4dC5hZGRDbGFzcyhkaXJlY3Rpb24pXG4gICAgICAgICRhY3RpdmVcbiAgICAgICAgICAub25lKCdic1RyYW5zaXRpb25FbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkbmV4dC5yZW1vdmVDbGFzcyhbdHlwZSwgZGlyZWN0aW9uXS5qb2luKCcgJykpLmFkZENsYXNzKCdhY3RpdmUnKVxuICAgICAgICAgICAgJGFjdGl2ZS5yZW1vdmVDbGFzcyhbJ2FjdGl2ZScsIGRpcmVjdGlvbl0uam9pbignICcpKVxuICAgICAgICAgICAgdGhhdC5zbGlkaW5nID0gZmFsc2VcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICB0aGF0LiRlbGVtZW50LnRyaWdnZXIoc2xpZEV2ZW50KVxuICAgICAgICAgICAgfSwgMClcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5lbXVsYXRlVHJhbnNpdGlvbkVuZChDYXJvdXNlbC5UUkFOU0lUSU9OX0RVUkFUSU9OKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGFjdGl2ZS5yZW1vdmVDbGFzcygnYWN0aXZlJylcbiAgICAgICAgJG5leHQuYWRkQ2xhc3MoJ2FjdGl2ZScpXG4gICAgICAgIHRoaXMuc2xpZGluZyA9IGZhbHNlXG4gICAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihzbGlkRXZlbnQpXG4gICAgICB9XG4gIFxuICAgICAgaXNDeWNsaW5nICYmIHRoaXMuY3ljbGUoKVxuICBcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuICBcbiAgXG4gICAgLy8gQ0FST1VTRUwgUExVR0lOIERFRklOSVRJT05cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBcbiAgICBmdW5jdGlvbiBQbHVnaW4ob3B0aW9uKSB7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyICR0aGlzICAgPSAkKHRoaXMpXG4gICAgICAgIHZhciBkYXRhICAgID0gJHRoaXMuZGF0YSgnYnMuY2Fyb3VzZWwnKVxuICAgICAgICB2YXIgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBDYXJvdXNlbC5ERUZBVUxUUywgJHRoaXMuZGF0YSgpLCB0eXBlb2Ygb3B0aW9uID09ICdvYmplY3QnICYmIG9wdGlvbilcbiAgICAgICAgdmFyIGFjdGlvbiAgPSB0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnID8gb3B0aW9uIDogb3B0aW9ucy5zbGlkZVxuICBcbiAgICAgICAgaWYgKCFkYXRhKSAkdGhpcy5kYXRhKCdicy5jYXJvdXNlbCcsIChkYXRhID0gbmV3IENhcm91c2VsKHRoaXMsIG9wdGlvbnMpKSlcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ251bWJlcicpIGRhdGEudG8ob3B0aW9uKVxuICAgICAgICBlbHNlIGlmIChhY3Rpb24pIGRhdGFbYWN0aW9uXSgpXG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMuaW50ZXJ2YWwpIGRhdGEucGF1c2UoKS5jeWNsZSgpXG4gICAgICB9KVxuICAgIH1cbiAgXG4gICAgdmFyIG9sZCA9ICQuZm4uY2Fyb3VzZWxcbiAgXG4gICAgJC5mbi5jYXJvdXNlbCAgICAgICAgICAgICA9IFBsdWdpblxuICAgICQuZm4uY2Fyb3VzZWwuQ29uc3RydWN0b3IgPSBDYXJvdXNlbFxuICBcbiAgXG4gICAgLy8gQ0FST1VTRUwgTk8gQ09ORkxJQ1RcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PVxuICBcbiAgICAkLmZuLmNhcm91c2VsLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAkLmZuLmNhcm91c2VsID0gb2xkXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH1cbiAgXG4gIFxuICAgIC8vIENBUk9VU0VMIERBVEEtQVBJXG4gICAgLy8gPT09PT09PT09PT09PT09PT1cbiAgXG4gICAgdmFyIGNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgaHJlZlxuICAgICAgdmFyICR0aGlzICAgPSAkKHRoaXMpXG4gICAgICB2YXIgJHRhcmdldCA9ICQoJHRoaXMuYXR0cignZGF0YS10YXJnZXQnKSB8fCAoaHJlZiA9ICR0aGlzLmF0dHIoJ2hyZWYnKSkgJiYgaHJlZi5yZXBsYWNlKC8uKig/PSNbXlxcc10rJCkvLCAnJykpIC8vIHN0cmlwIGZvciBpZTdcbiAgICAgIGlmICghJHRhcmdldC5oYXNDbGFzcygnY2Fyb3VzZWwnKSkgcmV0dXJuXG4gICAgICB2YXIgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCAkdGFyZ2V0LmRhdGEoKSwgJHRoaXMuZGF0YSgpKVxuICAgICAgdmFyIHNsaWRlSW5kZXggPSAkdGhpcy5hdHRyKCdkYXRhLXNsaWRlLXRvJylcbiAgICAgIGlmIChzbGlkZUluZGV4KSBvcHRpb25zLmludGVydmFsID0gZmFsc2VcbiAgXG4gICAgICBQbHVnaW4uY2FsbCgkdGFyZ2V0LCBvcHRpb25zKVxuICBcbiAgICAgIGlmIChzbGlkZUluZGV4KSB7XG4gICAgICAgICR0YXJnZXQuZGF0YSgnYnMuY2Fyb3VzZWwnKS50byhzbGlkZUluZGV4KVxuICAgICAgfVxuICBcbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIH1cbiAgXG4gICAgJChkb2N1bWVudClcbiAgICAgIC5vbignY2xpY2suYnMuY2Fyb3VzZWwuZGF0YS1hcGknLCAnW2RhdGEtc2xpZGVdJywgY2xpY2tIYW5kbGVyKVxuICAgICAgLm9uKCdjbGljay5icy5jYXJvdXNlbC5kYXRhLWFwaScsICdbZGF0YS1zbGlkZS10b10nLCBjbGlja0hhbmRsZXIpXG4gIFxuICAgICQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICQoJ1tkYXRhLXJpZGU9XCJjYXJvdXNlbFwiXScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgJGNhcm91c2VsID0gJCh0aGlzKVxuICAgICAgICBQbHVnaW4uY2FsbCgkY2Fyb3VzZWwsICRjYXJvdXNlbC5kYXRhKCkpXG4gICAgICB9KVxuICAgIH0pXG4gIFxuICB9KGpRdWVyeSk7XG4gIFxuICArZnVuY3Rpb24oKXtcbiAgICAkKCcuY2Fyb3VzZWwtaXRlbS1pbWFnZSAuaXRlbScpLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgIHZhciBpdGVtVG9DbG9uZSA9ICQodGhpcyk7XG4gIFxuICAgICAgZm9yICh2YXIgaT0xO2k8NTtpKyspIHtcbiAgICAgICAgaXRlbVRvQ2xvbmUgPSBpdGVtVG9DbG9uZS5uZXh0KCk7XG4gIFxuICAgICAgICAvLyB3cmFwIGFyb3VuZCBpZiBhdCBlbmQgb2YgaXRlbSBjb2xsZWN0aW9uXG4gICAgICAgIGlmICghaXRlbVRvQ2xvbmUubGVuZ3RoKSB7XG4gICAgICAgICAgaXRlbVRvQ2xvbmUgPSAkKHRoaXMpLnNpYmxpbmdzKCc6Zmlyc3QnKTtcbiAgICAgICAgfVxuICBcbiAgICAgICAgLy8gZ3JhYiBpdGVtLCBjbG9uZSwgYWRkIG1hcmtlciBjbGFzcywgYWRkIHRvIGNvbGxlY3Rpb25cbiAgICAgICAgaXRlbVRvQ2xvbmUuY2hpbGRyZW4oJzpmaXJzdC1jaGlsZCcpLmNsb25lKClcbiAgICAgICAgICAuYWRkQ2xhc3MoXCJjbG9uZWRpdGVtLVwiKyhpKSlcbiAgICAgICAgICAuYXBwZW5kVG8oJCh0aGlzKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0oKTtcbiAgXG4gICQoJy5jYXJvdXNlbCcpLmNhcm91c2VsKHtcbiAgXHRpbnRlcnZhbDogMCAvL3RlbXBcbiAgfSk7XG4gIFxuICAkKCcjY2Fyb3VzZWwtaXRlbS1pbWFnZScpLmNhcm91c2VsKHsgXG4gICAgaW50ZXJ2YWw6IDAgLy90ZW1wXG4gIH0pO1xuICAkKCcuanMtaGlkZS1maWx0ZXInKS5vbignY2xpY2snLGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyICR0aGlzID0gJCggdGhpcyApO1xuICAgIGlmICggJCgnLmZpbHRlcl9faW5wdXQtZ3JvdXAtLWFkZCcpLmhhc0NsYXNzKCdqcy1pc1Zpc2libGUnKSApIHtcbiAgICAgICQoJy5maWx0ZXJfX2lucHV0LWdyb3VwLS1hZGQnKS5yZW1vdmVDbGFzcygnanMtaXNWaXNpYmxlJyk7XG4gICAgICAkdGhpcy5yZW1vdmVDbGFzcygnaVNvcGVuZWQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJCgnLmZpbHRlcl9faW5wdXQtZ3JvdXAtLWFkZCcpLmFkZENsYXNzKCdqcy1pc1Zpc2libGUnKTsgICAgICBcbiAgICAgICR0aGlzLmFkZENsYXNzKCdpU29wZW5lZCcpO1xuICAgIH1cbiAgfSk7XG4gICQoJy5qcy1tYXBfX2J0bicpLm9uKCdjbGljaycsZnVuY3Rpb24oZSkge1xuICAgIHZhciB2YWwgPSAkKCB0aGlzICkuYXR0cignZGF0YS1tb2RhbCcpO1xuICAgIFxuICAgIC8vIHZhciBzdHlsZXMgPSB7XG4gICAgLy8gICBkaXNwbGF5IDogXCJibG9ja1wiLFxuICAgIC8vICAgd2lkdGg6IFwiMTAwJVwiLFxuICAgIC8vICAgdG9wOiAtaGVhZGVIZWlnaHRcbiAgICAvLyB9O1xuICAgIFxuICAgICQoJyMnK3ZhbCkuYWRkQ2xhc3MoJ2lzT3BlbmVkJyk7XG4gIH0pO1xuICAkKCcuaXRlbV9faW1nJykuY2xpY2soZnVuY3Rpb24oKXtcbiAgICB2YXIgaW1nU3JjID0gJCggdGhpcyApLmF0dHIoJ3NyYycpO1xuICBcbiAgICBjb25zb2xlLmxvZyggaW1nU3JjICk7XG4gICAgXG4gICAgJCgnLmltYWdlX19jb250YWluZXInKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAndXJsKCcgKyBpbWdTcmMgKyAnKScgKTtcbiAgfSk7XG4gIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJykgIT09IG51bGwpIHtcbiAgLy8gICBmdW5jdGlvbiBtYXBTaXplKCl7XG4gIC8vICAgICB2YXIgbWFwUG9zID0gJCgnI21hcCcpLm9mZnNldCgpLnRvcDtcbiAgLy8gICAgIHZhciB3aW5IZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XG4gIC8vICAgICB2YXIgbWFwSGVpZ2h0ID0gd2luSGVpZ2h0IC0gbWFwUG9zO1xuICAvLyAgICAgLy8gY29uc29sZS5sb2cod2luSGVpZ2h0KTtcbiAgLy8gICAgICQoJyNtYXAnKS5jc3MoJ2hlaWdodCcsIG1hcEhlaWdodCk7XG4gIC8vICAgfTtcbiAgXG4gIC8vICAgbWFwU2l6ZSgpO1xuICBcbiAgLy8gICAkKCB3aW5kb3cgKS5yZXNpemUoZnVuY3Rpb24oKSB7XG4gIC8vICAgICBtYXBTaXplKCk7XG4gIC8vICAgfSk7XG4gIFxuICAgICAgLy8g0KTRg9C90LrRhtC40Y8geW1hcHMucmVhZHkoKSDQsdGD0LTQtdGCINCy0YvQt9Cy0LDQvdCwLCDQutC+0LPQtNCwXG4gICAgICAvLyDQt9Cw0LPRgNGD0LfRj9GC0YHRjyDQstGB0LUg0LrQvtC80L/QvtC90LXQvdGC0YsgQVBJLCDQsCDRgtCw0LrQttC1INC60L7Qs9C00LAg0LHRg9C00LXRgiDQs9C+0YLQvtCy0L4gRE9NLdC00LXRgNC10LLQvi5cbiAgICAgIHltYXBzLnJlYWR5KGluaXQpO1xuICBcbiAgICAgIGZ1bmN0aW9uIGluaXQoKXsgXG4gICAgICAgICAgLy8g0KHQvtC30LTQsNC90LjQtSDQutCw0YDRgtGLLiAgICBcbiAgICAgICAgICB2YXIgbXlNYXAgPSBuZXcgeW1hcHMuTWFwKFwibWFwXCIsIHtcbiAgICAgICAgICAgICAgLy8g0JrQvtC+0YDQtNC40L3QsNGC0Ysg0YbQtdC90YLRgNCwINC60LDRgNGC0YsuXG4gICAgICAgICAgICAgIC8vINCf0L7RgNGP0LTQvtC6INC/0L4g0YPQvNC+0LvRh9C90LjRjjogwqvRiNC40YDQvtGC0LAsINC00L7Qu9Cz0L7RgtCwwrsuXG4gICAgICAgICAgICAgIC8vINCn0YLQvtCx0Ysg0L3QtSDQvtC/0YDQtdC00LXQu9GP0YLRjCDQutC+0L7RgNC00LjQvdCw0YLRiyDRhtC10L3RgtGA0LAg0LrQsNGA0YLRiyDQstGA0YPRh9C90YPRjixcbiAgICAgICAgICAgICAgLy8g0LLQvtGB0L/QvtC70YzQt9GD0LnRgtC10YHRjCDQuNC90YHRgtGA0YPQvNC10L3RgtC+0Lwg0J7Qv9GA0LXQtNC10LvQtdC90LjQtSDQutC+0L7RgNC00LjQvdCw0YIuXG4gICAgICAgICAgICAgIGNlbnRlcjogWzU1Ljc2LCAzNy42NF0sXG4gICAgICAgICAgICAgIC8vINCj0YDQvtCy0LXQvdGMINC80LDRgdGI0YLQsNCx0LjRgNC+0LLQsNC90LjRjy4g0JTQvtC/0YPRgdGC0LjQvNGL0LUg0LfQvdCw0YfQtdC90LjRjzpcbiAgICAgICAgICAgICAgLy8g0L7RgiAwICjQstC10YHRjCDQvNC40YApINC00L4gMTkuXG4gICAgICAgICAgICAgIHpvb206IDE4LFxuICAgICAgICAgICAgICBjb250cm9sczogW11cbiAgICAgICAgICB9KSwgXG4gIFxuICAgICAgICAgIC8vINCc0LXRgtC60LAsINGB0L7QtNC10YDQttC40LzQvtC1INCx0LDQu9GD0L3QsCDQutC+0YLQvtGA0L7QuSDQt9Cw0LPRgNGD0LbQsNC10YLRgdGPINGBINC/0L7QvNC+0YnRjNGOIEFKQVguXG4gICAgICAgICAgcGxhY2VtYXJrID0gbmV3IHltYXBzLlBsYWNlbWFyayhbNTUuNzYwNTg0LCAzNy42Mzk0NTBdLCB7fSwge1xuICAgICAgICAgICAgICBpY29uTGF5b3V0OiAnZGVmYXVsdCNpbWFnZScsXG4gICAgICAgICAgICAgIGljb25JbWFnZUhyZWY6ICdpbWFnZXMvbWFwX19iYWxvb24ucG5nJyxcbiAgICAgICAgICAgICAgaWNvbkltYWdlU2l6ZTogWzQwLCA1MF0sXG4gICAgICAgICAgICAgIGljb25JbWFnZU9mZnNldDogWy0yMCwgLTUwXVxuICAgICAgICAgIH0pLFxuICBcbiAgICAgICAgICAvLyDQodC+0LfQtNCw0LTQuNC8INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjNGB0LrQuNC5INC80LDQutC10YIg0L/QvtC70LfRg9C90LrQsCDQvNCw0YHRiNGC0LDQsdCwLlxuICAgICAgICAgIFpvb21MYXlvdXQgPSB5bWFwcy50ZW1wbGF0ZUxheW91dEZhY3RvcnkuY3JlYXRlQ2xhc3MoXCI8ZGl2IGNsYXNzPSdtYXBfX3pvb20tYmxvY2sgdS1qYy1zYnUtZmQtY29sJz5cIiArXG4gICAgICAgICAgXCI8ZGl2IGlkPSd6b29tLWluJyBjbGFzcz0nbWFwX196b29tIG1hcF9fem9vbS0tbWludXMgdS1qYy1jZSB1LWFpLWNlJz5cIiArXG4gICAgICAgICAgXCI8c3ZnIGNsYXNzPSdzdmcnIHdpZHRoPSc4cHgnIGhlaWdodD0nMnB4JyB2aWV3Qm94PScwIDAgOCAyJyB2ZXJzaW9uPScxLjEnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgeG1sbnM6eGxpbms9J2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnPlwiICtcbiAgICAgICAgICBcIjxyZWN0IGlkPSdtYXBfX21pbnVzJyB3aWR0aD0nOCcgaGVpZ2h0PScyJz48L3JlY3Q+XCIgK1xuICAgICAgICAgIFwiPC9zdmc+PC9kaXY+PGJyPlwiICtcbiAgICAgICAgICBcIjxkaXYgaWQ9J3pvb20tb3V0JyBjbGFzcz0nbWFwX196b29tIHUtamMtY2UgdS1haS1jZSc+XCIgK1xuICAgICAgICAgIFwiPHN2ZyBjbGFzcz0nc3ZnJyB3aWR0aD0nMTJweCcgaGVpZ2h0PScxMnB4JyB2aWV3Qm94PScwIDAgMTIgMTInIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc+XCIgK1xuICAgICAgICAgIFwiPGcgaWQ9J0dyb3VwJyA+PHJlY3QgaWQ9J1JlY3RhbmdsZS0zJyB4PScwJyB5PSc1JyB3aWR0aD0nMTInIGhlaWdodD0nMic+PC9yZWN0PlwiICtcbiAgICAgICAgICBcIjxyZWN0IGlkPSdSZWN0YW5nbGUtMycgdHJhbnNmb3JtPSd0cmFuc2xhdGUoNi4wMDAwMDAsIDYuMDAwMDAwKSByb3RhdGUoOTAuMDAwMDAwKSB0cmFuc2xhdGUoLTYuMDAwMDAwLCAtNi4wMDAwMDApICcgeD0nMCcgeT0nNScgd2lkdGg9JzEyJyBoZWlnaHQ9JzInPjwvcmVjdD48L2c+XCIgK1xuICAgICAgICAgIFwiPC9zdmc+PC9kaXY+XCIsIHtcbiAgXG4gICAgICAgICAgLy8g0J/QtdGA0LXQvtC/0YDQtdC00LXQu9GP0LXQvCDQvNC10YLQvtC00Ysg0LzQsNC60LXRgtCwLCDRh9GC0L7QsdGLINCy0YvQv9C+0LvQvdGP0YLRjCDQtNC+0L/QvtC70L3QuNGC0LXQu9GM0L3Ri9C1INC00LXQudGB0YLQstC40Y9cbiAgICAgICAgICAvLyDQv9GA0Lgg0L/QvtGB0YLRgNC+0LXQvdC40Lgg0Lgg0L7Rh9C40YHRgtC60LUg0LzQsNC60LXRgtCwLlxuICAgICAgICAgIGJ1aWxkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIC8vINCS0YvQt9GL0LLQsNC10Lwg0YDQvtC00LjRgtC10LvRjNGB0LrQuNC5INC80LXRgtC+0LQgYnVpbGQuXG4gICAgICAgICAgICAgIFpvb21MYXlvdXQuc3VwZXJjbGFzcy5idWlsZC5jYWxsKHRoaXMpO1xuICBcbiAgICAgICAgICAgICAgLy8g0J/RgNC40LLRj9C30YvQstCw0LXQvCDRhNGD0L3QutGG0LjQuC3QvtCx0YDQsNCx0L7RgtGH0LjQutC4INC6INC60L7QvdGC0LXQutGB0YLRgyDQuCDRgdC+0YXRgNCw0L3Rj9C10Lwg0YHRgdGL0LvQutC4XG4gICAgICAgICAgICAgIC8vINC90LAg0L3QuNGFLCDRh9GC0L7QsdGLINC/0L7RgtC+0Lwg0L7RgtC/0LjRgdCw0YLRjNGB0Y8g0L7RgiDRgdC+0LHRi9GC0LjQuS5cbiAgICAgICAgICAgICAgdGhpcy56b29tSW5DYWxsYmFjayA9IHltYXBzLnV0aWwuYmluZCh0aGlzLnpvb21JbiwgdGhpcyk7XG4gICAgICAgICAgICAgIHRoaXMuem9vbU91dENhbGxiYWNrID0geW1hcHMudXRpbC5iaW5kKHRoaXMuem9vbU91dCwgdGhpcyk7XG4gIFxuICAgICAgICAgICAgICAvLyDQndCw0YfQuNC90LDQtdC8INGB0LvRg9GI0LDRgtGMINC60LvQuNC60Lgg0L3QsCDQutC90L7Qv9C60LDRhSDQvNCw0LrQtdGC0LAuXG4gICAgICAgICAgICAgICQoJyN6b29tLWluJykuYmluZCgnY2xpY2snLCB0aGlzLnpvb21JbkNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgJCgnI3pvb20tb3V0JykuYmluZCgnY2xpY2snLCB0aGlzLnpvb21PdXRDYWxsYmFjayk7XG4gICAgICAgICAgfSxcbiAgXG4gICAgICAgICAgY2xlYXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgLy8g0KHQvdC40LzQsNC10Lwg0L7QsdGA0LDQsdC+0YLRh9C40LrQuCDQutC70LjQutC+0LIuXG4gICAgICAgICAgICAgICQoJyN6b29tLWluJykudW5iaW5kKCdjbGljaycsIHRoaXMuem9vbUluQ2FsbGJhY2spO1xuICAgICAgICAgICAgICAkKCcjem9vbS1vdXQnKS51bmJpbmQoJ2NsaWNrJywgdGhpcy56b29tT3V0Q2FsbGJhY2spO1xuICBcbiAgICAgICAgICAgICAgLy8g0JLRi9C30YvQstCw0LXQvCDRgNC+0LTQuNGC0LXQu9GM0YHQutC40Lkg0LzQtdGC0L7QtCBjbGVhci5cbiAgICAgICAgICAgICAgWm9vbUxheW91dC5zdXBlcmNsYXNzLmNsZWFyLmNhbGwodGhpcyk7XG4gICAgICAgICAgfSxcbiAgXG4gICAgICAgICAgem9vbUluOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHZhciBtYXAgPSB0aGlzLmdldERhdGEoKS5jb250cm9sLmdldE1hcCgpO1xuICAgICAgICAgICAgICBtYXAuc2V0Wm9vbShtYXAuZ2V0Wm9vbSgpICsgMSwge2NoZWNrWm9vbVJhbmdlOiB0cnVlfSk7XG4gICAgICAgICAgfSxcbiAgXG4gICAgICAgICAgem9vbU91dDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICB2YXIgbWFwID0gdGhpcy5nZXREYXRhKCkuY29udHJvbC5nZXRNYXAoKTtcbiAgICAgICAgICAgICAgbWFwLnNldFpvb20obWFwLmdldFpvb20oKSAtIDEsIHtjaGVja1pvb21SYW5nZTogdHJ1ZX0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICB9KSxcbiAgICAgICAgICB6b29tQ29udHJvbCA9IG5ldyB5bWFwcy5jb250cm9sLlpvb21Db250cm9sKHtcbiAgICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgbGF5b3V0OiBab29tTGF5b3V0LFxuICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAzMCxcbiAgICAgICAgICAgICAgICAgICAgICB0b3A6IDQ2NSAvL3RlbXBcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIG15TWFwLmNvbnRyb2xzLmFkZCh6b29tQ29udHJvbCk7XG4gICAgICAgICAgbXlNYXAuZ2VvT2JqZWN0cy5hZGQocGxhY2VtYXJrKTtcbiAgICAgIH1cbiAgfVxuICAkKCcjbW9kYWwtY2xvc2UnKS5vbignY2xpY2snLGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgJHRoaXMgPSAkKCB0aGlzICk7XG4gIFxuICAgICR0aGlzLmNsb3Nlc3QoJy5qcy1tb2RhbCcpLnJlbW92ZUNsYXNzKCdpc09wZW5lZCcpO1xuICB9KTtcbiAgJCgnLmpzLXRhYl9faXRlbScpLm9uKCdjbGljaycsZnVuY3Rpb24oZSkge1xuICAgIHZhciAkdGhpcyA9ICQoIHRoaXMgKTtcbiAgXG4gICAgJHRoaXMuY2xvc2VzdCgnLnRhYicpLmZpbmQoJy5qcy10YWJfX2l0ZW0nKS5yZW1vdmVDbGFzcygnanMtYWN0aXZlJyk7XG4gICAgJHRoaXMuYWRkQ2xhc3MoJ2pzLWFjdGl2ZScpO1xuICBcbiAgICB2YXIgdmFsID0gJHRoaXMuYXR0cignZGF0YS10YWInKTsgICAgXG4gIFxuICAgICR0aGlzLmNsb3Nlc3QoJy50YWInKS5maW5kKCcudGFiX19ibG9jaycpLnJlbW92ZUNsYXNzKCdqcy1hY3RpdmUnKTtcbiAgICAkKCdbZGF0YS1jb250ZW50PVwiJyt2YWwrJ1wiXScpLmFkZENsYXNzKCdqcy1hY3RpdmUnKTtcbiAgfSk7XG59KSJdfQ==
