$(document).ready(function(){if(function(s){"use strict";s.fn.emulateTransitionEnd=function(t){var e=!1,i=this;s(this).one("bsTransitionEnd",function(){e=!0});return setTimeout(function(){e||s(i).trigger(s.support.transition.end)},t),this},s(function(){s.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}(),s.support.transition&&(s.event.special.bsTransitionEnd={bindType:s.support.transition.end,delegateType:s.support.transition.end,handle:function(t){if(s(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(u){"use strict";var h=function(t,e){this.$element=u(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=e,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",u.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",u.proxy(this.pause,this)).on("mouseleave.bs.carousel",u.proxy(this.cycle,this))};function r(n){return this.each(function(){var t=u(this),e=t.data("bs.carousel"),i=u.extend({},h.DEFAULTS,t.data(),"object"==typeof n&&n),s="string"==typeof n?n:i.slide;e||t.data("bs.carousel",e=new h(this,i)),"number"==typeof n?e.to(n):s?e[s]():i.interval&&e.pause().cycle()})}h.VERSION="3.3.5",h.TRANSITION_DURATION=600,h.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},h.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},h.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(u.proxy(this.next,this),this.options.interval)),this},h.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},h.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e);if(("prev"==t&&0===i||"next"==t&&i==this.$items.length-1)&&!this.options.wrap)return e;var s=(i+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(s)},h.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(i<t?"next":"prev",this.$items.eq(t))},h.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&u.support.transition&&(this.$element.trigger(u.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},h.prototype.next=function(){if(!this.sliding)return this.slide("next")},h.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},h.prototype.slide=function(t,e){var i=this.$element.find(".item.active"),s=e||this.getItemForDirection(t,i),n=this.interval,a="next"==t?"left":"right",r=this;if(s.hasClass("active"))return this.sliding=!1;var o=s[0],l=u.Event("slide.bs.carousel",{relatedTarget:o,direction:a});if(this.$element.trigger(l),!l.isDefaultPrevented()){if(this.sliding=!0,n&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=u(this.$indicators.children()[this.getItemIndex(s)]);d&&d.addClass("active")}var c=u.Event("slid.bs.carousel",{relatedTarget:o,direction:a});return u.support.transition&&this.$element.hasClass("slide")?(s.addClass(t),s[0].offsetWidth,i.addClass(a),s.addClass(a),i.one("bsTransitionEnd",function(){s.removeClass([t,a].join(" ")).addClass("active"),i.removeClass(["active",a].join(" ")),r.sliding=!1,setTimeout(function(){r.$element.trigger(c)},0)}).emulateTransitionEnd(h.TRANSITION_DURATION)):(i.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(c)),n&&this.cycle(),this}};var t=u.fn.carousel;u.fn.carousel=r,u.fn.carousel.Constructor=h,u.fn.carousel.noConflict=function(){return u.fn.carousel=t,this};var e=function(t){var e,i=u(this),s=u(i.attr("data-target")||(e=i.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var n=u.extend({},s.data(),i.data()),a=i.attr("data-slide-to");a&&(n.interval=!1),r.call(s,n),a&&s.data("bs.carousel").to(a),t.preventDefault()}};u(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),u(window).on("load",function(){u('[data-ride="carousel"]').each(function(){var t=u(this);r.call(t,t.data())})})}(jQuery),$(".carousel").carousel({interval:0}),$(".js-hide-filter").on("click",function(t){t.preventDefault();var e=$(this);$(".filter__input-group--add").hasClass("js-isVisible")?($(".filter__input-group--add").removeClass("js-isVisible"),e.addClass("iSopened")):($(".filter__input-group--add").addClass("js-isVisible"),e.removeClass("iSopened"))}),null!==document.getElementById("map")){ymaps.ready(function(){new ymaps.Map("map",{center:[55.76,37.64],zoom:18,controls:[]})})}$(".js-tab__item").on("click",function(t){var e=$(this);e.closest(".tab").find(".js-tab__item").removeClass("js-active"),e.addClass("js-active");var i=e.attr("data-tab");e.closest(".tab").find(".tab__block").removeClass("js-active"),$("#"+i).addClass("js-active")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCJmbiIsImVtdWxhdGVUcmFuc2l0aW9uRW5kIiwiZHVyYXRpb24iLCJjYWxsZWQiLCIkZWwiLCJ0aGlzIiwib25lIiwic2V0VGltZW91dCIsInRyaWdnZXIiLCJzdXBwb3J0IiwidHJhbnNpdGlvbiIsImVuZCIsImVsIiwiY3JlYXRlRWxlbWVudCIsInRyYW5zRW5kRXZlbnROYW1lcyIsIldlYmtpdFRyYW5zaXRpb24iLCJNb3pUcmFuc2l0aW9uIiwiT1RyYW5zaXRpb24iLCJuYW1lIiwidW5kZWZpbmVkIiwic3R5bGUiLCJ0cmFuc2l0aW9uRW5kIiwiZXZlbnQiLCJzcGVjaWFsIiwiYnNUcmFuc2l0aW9uRW5kIiwiYmluZFR5cGUiLCJkZWxlZ2F0ZVR5cGUiLCJoYW5kbGUiLCJlIiwidGFyZ2V0IiwiaXMiLCJoYW5kbGVPYmoiLCJoYW5kbGVyIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJqUXVlcnkiLCJDYXJvdXNlbCIsImVsZW1lbnQiLCJvcHRpb25zIiwiJGVsZW1lbnQiLCIkaW5kaWNhdG9ycyIsImZpbmQiLCJwYXVzZWQiLCJzbGlkaW5nIiwiaW50ZXJ2YWwiLCIkYWN0aXZlIiwiJGl0ZW1zIiwia2V5Ym9hcmQiLCJvbiIsInByb3h5Iiwia2V5ZG93biIsInBhdXNlIiwiZG9jdW1lbnRFbGVtZW50IiwiY3ljbGUiLCJQbHVnaW4iLCJvcHRpb24iLCJlYWNoIiwiJHRoaXMiLCJkYXRhIiwiZXh0ZW5kIiwiREVGQVVMVFMiLCJhY3Rpb24iLCJzbGlkZSIsInRvIiwiVkVSU0lPTiIsIlRSQU5TSVRJT05fRFVSQVRJT04iLCJ3cmFwIiwicHJvdG90eXBlIiwidGVzdCIsInRhZ05hbWUiLCJ3aGljaCIsInByZXYiLCJuZXh0IiwicHJldmVudERlZmF1bHQiLCJjbGVhckludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJnZXRJdGVtSW5kZXgiLCJpdGVtIiwicGFyZW50IiwiY2hpbGRyZW4iLCJpbmRleCIsImdldEl0ZW1Gb3JEaXJlY3Rpb24iLCJkaXJlY3Rpb24iLCJhY3RpdmUiLCJhY3RpdmVJbmRleCIsImxlbmd0aCIsIml0ZW1JbmRleCIsImVxIiwicG9zIiwidGhhdCIsInR5cGUiLCIkbmV4dCIsImlzQ3ljbGluZyIsImhhc0NsYXNzIiwicmVsYXRlZFRhcmdldCIsInNsaWRlRXZlbnQiLCJFdmVudCIsImlzRGVmYXVsdFByZXZlbnRlZCIsInJlbW92ZUNsYXNzIiwiJG5leHRJbmRpY2F0b3IiLCJhZGRDbGFzcyIsInNsaWRFdmVudCIsIm9mZnNldFdpZHRoIiwiam9pbiIsIm9sZCIsImNhcm91c2VsIiwiQ29uc3RydWN0b3IiLCJub0NvbmZsaWN0IiwiY2xpY2tIYW5kbGVyIiwiaHJlZiIsIiR0YXJnZXQiLCJhdHRyIiwicmVwbGFjZSIsInNsaWRlSW5kZXgiLCJjYWxsIiwid2luZG93IiwiJGNhcm91c2VsIiwiZ2V0RWxlbWVudEJ5SWQiLCJ5bWFwcyIsIk1hcCIsImNlbnRlciIsInpvb20iLCJjb250cm9scyIsImNsb3Nlc3QiLCJ2YWwiXSwibWFwcGluZ3MiOiJBQUFBQSxFQUFFQyxVQUFVQyxNQUFNLFdBMlRoQixHQWpUQyxTQUFVRixHQUNULGFBeUJBQSxFQUFFRyxHQUFHQyxxQkFBdUIsU0FBVUMsR0FDcEMsSUFBSUMsR0FBUyxFQUNUQyxFQUFNQyxLQUNWUixFQUFFUSxNQUFNQyxJQUFJLGtCQUFtQixXQUFjSCxHQUFTLElBR3RELE9BREFJLFdBRGUsV0FBbUJKLEdBQVFOLEVBQUVPLEdBQUtJLFFBQVFYLEVBQUVZLFFBQVFDLFdBQVdDLE1BQ3pEVCxHQUNkRyxNQUdUUixFQUFFLFdBQ0FBLEVBQUVZLFFBQVFDLFdBOUJaLFdBQ0UsSUFBSUUsRUFBS2QsU0FBU2UsY0FBYyxhQUU1QkMsRUFBcUIsQ0FDdkJDLGlCQUFtQixzQkFDbkJDLGNBQW1CLGdCQUNuQkMsWUFBbUIsZ0NBQ25CUCxXQUFtQixpQkFHckIsSUFBSyxJQUFJUSxLQUFRSixFQUNmLFFBQXVCSyxJQUFuQlAs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QUFPNEQsS0FBS0UsRUFBV0EsRUFBVTFELFlBL050QyxDQW1PQ3ZCLFFBSUZ0QyxFQUFFLGFBQWE0RyxTQUFTLENBQ3ZCN0QsU0FBVSxJQUVYL0MsRUFBRSxtQkFBbUJtRCxHQUFHLFFBQVEsU0FBU3BCLEdBQ3ZDQSxFQUFFNkMsaUJBQ0YsSUFBSWhCLEVBQVE1RCxFQUFHUSxNQUNWUixFQUFFLDZCQUE2QmdHLFNBQVMsaUJBQzNDaEcsRUFBRSw2QkFBNkJxRyxZQUFZLGdCQUMzQ3pDLEVBQU0yQyxTQUFTLGNBRWZ2RyxFQUFFLDZCQUE2QnVHLFNBQVMsZ0JBQ3hDM0MsRUFBTXlDLFlBQVksZUFHaUIsT0FBbkNwRyxTQUFTdUgsZUFBZSxPQUFpQixDQWlCM0NDLE1BQU12SCxNQUNOLFdBRWdCLElBQUl1SCxNQUFNQyxJQUFJLE1BQU8sQ0FLN0JDLE9BQVEsQ0FBQyxNQUFPLE9BR2hCQyxLQUFNLEdBQ05DLFNBQVUsT0FJcEI3SCxFQUFFLGlCQUFpQm1ELEdBQUcsUUFBUSxTQUFTcEIsR0FDckMsSUFBSTZCLEVBQVE1RCxFQUFHUSxNQUVmb0QsRUFBTWtFLFFBQVEsUUFBUWxGLEtBQUssaUJBQWlCeUQsWUFBWSxhQUN4RHpDLEVBQU0yQyxTQUFTLGFBRWYsSUFBSXdCLEVBQU1uRSxFQUFNc0QsS0FBSyxZQUVyQnRELEVBQU1rRSxRQUFRLFFBQVFsRixLQUFLLGVBQWV5RCxZQUFZLGFBQ3REckcsRUFBRSxJQUFJK0gsR0FBS3hCLFNBQVMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAqIEJvb3RzdHJhcDogdHJhbnNpdGlvbi5qcyB2My4zLjVcbiAgICogaHR0cHM6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvI3RyYW5zaXRpb25zXG4gICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgKiBDb3B5cmlnaHQgMjAxMS0yMDE1IFR3aXR0ZXIsIEluYy5cbiAgICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcbiAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG4gIFxuICBcbiAgK2Z1bmN0aW9uICgkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICBcbiAgICAvLyBDU1MgVFJBTlNJVElPTiBTVVBQT1JUIChTaG91dG91dDogaHR0cHM6Ly93d3cubW9kZXJuaXpyLmNvbS8pXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIFxuICAgIGZ1bmN0aW9uIHRyYW5zaXRpb25FbmQoKSB7XG4gICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdib290c3RyYXAnKVxuICBcbiAgICAgIHZhciB0cmFuc0VuZEV2ZW50TmFtZXMgPSB7XG4gICAgICAgIFdlYmtpdFRyYW5zaXRpb24gOiAnd2Via2l0VHJhbnNpdGlvbkVuZCcsXG4gICAgICAgIE1velRyYW5zaXRpb24gICAgOiAndHJhbnNpdGlvbmVuZCcsXG4gICAgICAgIE9UcmFuc2l0aW9uICAgICAgOiAnb1RyYW5zaXRpb25FbmQgb3RyYW5zaXRpb25lbmQnLFxuICAgICAgICB0cmFuc2l0aW9uICAgICAgIDogJ3RyYW5zaXRpb25lbmQnXG4gICAgICB9XG4gIFxuICAgICAgZm9yICh2YXIgbmFtZSBpbiB0cmFuc0VuZEV2ZW50TmFtZXMpIHtcbiAgICAgICAgaWYgKGVsLnN0eWxlW25hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICByZXR1cm4geyBlbmQ6IHRyYW5zRW5kRXZlbnROYW1lc1tuYW1lXSB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgXG4gICAgICByZXR1cm4gZmFsc2UgLy8gZXhwbGljaXQgZm9yIGllOCAoICAuXy4pXG4gICAgfVxuICBcbiAgICAvLyBodHRwOi8vYmxvZy5hbGV4bWFjY2F3LmNvbS9jc3MtdHJhbnNpdGlvbnNcbiAgICAkLmZuLmVtdWxhdGVUcmFuc2l0aW9uRW5kID0gZnVuY3Rpb24gKGR1cmF0aW9uKSB7XG4gICAgICB2YXIgY2FsbGVkID0gZmFsc2VcbiAgICAgIHZhciAkZWwgPSB0aGlzXG4gICAgICAkKHRoaXMpLm9uZSgnYnNUcmFuc2l0aW9uRW5kJywgZnVuY3Rpb24gKCkgeyBjYWxsZWQgPSB0cnVlIH0pXG4gICAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7IGlmICghY2FsbGVkKSAkKCRlbCkudHJpZ2dlcigkLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQpIH1cbiAgICAgIHNldFRpbWVvdXQoY2FsbGJhY2ssIGR1cmF0aW9uKVxuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG4gIFxuICAgICQoZnVuY3Rpb24gKCkge1xuICAgICAgJC5zdXBwb3J0LnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uRW5kKClcbiAgXG4gICAgICBpZiAoISQuc3VwcG9ydC50cmFuc2l0aW9uKSByZXR1cm5cbiAgXG4gICAgICAkLmV2ZW50LnNwZWNpYWwuYnNUcmFuc2l0aW9uRW5kID0ge1xuICAgICAgICBiaW5kVHlwZTogJC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kLFxuICAgICAgICBkZWxlZ2F0ZVR5cGU6ICQuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCxcbiAgICAgICAgaGFuZGxlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGlmICgkKGUudGFyZ2V0KS5pcyh0aGlzKSkgcmV0dXJuIGUuaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgXG4gIH0oalF1ZXJ5KTtcbiAgXG4gIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgKiBCb290c3RyYXA6IGNhcm91c2VsLmpzIHYzLjMuNVxuICAgKiBodHRwczovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jY2Fyb3VzZWxcbiAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAqIENvcHlyaWdodCAyMDExLTIwMTUgVHdpdHRlciwgSW5jLlxuICAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICAgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbiAgXG4gIFxuICArZnVuY3Rpb24gKCQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gIFxuICAgIC8vIENBUk9VU0VMIENMQVNTIERFRklOSVRJT05cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09XG4gIFxuICAgIHZhciBDYXJvdXNlbCA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICB0aGlzLiRlbGVtZW50ICAgID0gJChlbGVtZW50KVxuICAgICAgdGhpcy4kaW5kaWNhdG9ycyA9IHRoaXMuJGVsZW1lbnQuZmluZCgnLmNhcm91c2VsLWluZGljYXRvcnMnKVxuICAgICAgdGhpcy5vcHRpb25zICAgICA9IG9wdGlvbnNcbiAgICAgIHRoaXMucGF1c2VkICAgICAgPSBudWxsXG4gICAgICB0aGlzLnNsaWRpbmcgICAgID0gbnVsbFxuICAgICAgdGhpcy5pbnRlcnZhbCAgICA9IG51bGxcbiAgICAgIHRoaXMuJGFjdGl2ZSAgICAgPSBudWxsXG4gICAgICB0aGlzLiRpdGVtcyAgICAgID0gbnVsbFxuICBcbiAgICAgIHRoaXMub3B0aW9ucy5rZXlib2FyZCAmJiB0aGlzLiRlbGVtZW50Lm9uKCdrZXlkb3duLmJzLmNhcm91c2VsJywgJC5wcm94eSh0aGlzLmtleWRvd24sIHRoaXMpKVxuICBcbiAgICAgIHRoaXMub3B0aW9ucy5wYXVzZSA9PSAnaG92ZXInICYmICEoJ29udG91Y2hzdGFydCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSAmJiB0aGlzLiRlbGVtZW50XG4gICAgICAgIC5vbignbW91c2VlbnRlci5icy5jYXJvdXNlbCcsICQucHJveHkodGhpcy5wYXVzZSwgdGhpcykpXG4gICAgICAgIC5vbignbW91c2VsZWF2ZS5icy5jYXJvdXNlbCcsICQucHJveHkodGhpcy5jeWNsZSwgdGhpcykpXG4gICAgfVxuICBcbiAgICBDYXJvdXNlbC5WRVJTSU9OICA9ICczLjMuNSdcbiAgXG4gICAgQ2Fyb3VzZWwuVFJBTlNJVElPTl9EVVJBVElPTiA9IDYwMFxuICBcbiAgICBDYXJvdXNlbC5ERUZBVUxUUyA9IHtcbiAgICAgIGludGVydmFsOiA1MDAwLFxuICAgICAgcGF1c2U6ICdob3ZlcicsXG4gICAgICB3cmFwOiB0cnVlLFxuICAgICAga2V5Ym9hcmQ6IHRydWVcbiAgICB9XG4gIFxuICAgIENhcm91c2VsLnByb3RvdHlwZS5rZXlkb3duID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmICgvaW5wdXR8dGV4dGFyZWEvaS50ZXN0KGUudGFyZ2V0LnRhZ05hbWUpKSByZXR1cm5cbiAgICAgIHN3aXRjaCAoZS53aGljaCkge1xuICAgICAgICBjYXNlIDM3OiB0aGlzLnByZXYoKTsgYnJlYWtcbiAgICAgICAgY2FzZSAzOTogdGhpcy5uZXh0KCk7IGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6IHJldHVyblxuICAgICAgfVxuICBcbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIH1cbiAgXG4gICAgQ2Fyb3VzZWwucHJvdG90eXBlLmN5Y2xlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIGUgfHwgKHRoaXMucGF1c2VkID0gZmFsc2UpXG4gIFxuICAgICAgdGhpcy5pbnRlcnZhbCAmJiBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpXG4gIFxuICAgICAgdGhpcy5vcHRpb25zLmludGVydmFsXG4gICAgICAgICYmICF0aGlzLnBhdXNlZFxuICAgICAgICAmJiAodGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKCQucHJveHkodGhpcy5uZXh0LCB0aGlzKSwgdGhpcy5vcHRpb25zLmludGVydmFsKSlcbiAgXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH1cbiAgXG4gICAgQ2Fyb3VzZWwucHJvdG90eXBlLmdldEl0ZW1JbmRleCA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB0aGlzLiRpdGVtcyA9IGl0ZW0ucGFyZW50KCkuY2hpbGRyZW4oJy5pdGVtJylcbiAgICAgIHJldHVybiB0aGlzLiRpdGVtcy5pbmRleChpdGVtIHx8IHRoaXMuJGFjdGl2ZSlcbiAgICB9XG4gIFxuICAgIENhcm91c2VsLnByb3RvdHlwZS5nZXRJdGVtRm9yRGlyZWN0aW9uID0gZnVuY3Rpb24gKGRpcmVjdGlvbiwgYWN0aXZlKSB7XG4gICAgICB2YXIgYWN0aXZlSW5kZXggPSB0aGlzLmdldEl0ZW1JbmRleChhY3RpdmUpXG4gICAgICB2YXIgd2lsbFdyYXAgPSAoZGlyZWN0aW9uID09ICdwcmV2JyAmJiBhY3RpdmVJbmRleCA9PT0gMClcbiAgICAgICAgICAgICAgICAgIHx8IChkaXJlY3Rpb24gPT0gJ25leHQnICYmIGFjdGl2ZUluZGV4ID09ICh0aGlzLiRpdGVtcy5sZW5ndGggLSAxKSlcbiAgICAgIGlmICh3aWxsV3JhcCAmJiAhdGhpcy5vcHRpb25zLndyYXApIHJldHVybiBhY3RpdmVcbiAgICAgIHZhciBkZWx0YSA9IGRpcmVjdGlvbiA9PSAncHJldicgPyAtMSA6IDFcbiAgICAgIHZhciBpdGVtSW5kZXggPSAoYWN0aXZlSW5kZXggKyBkZWx0YSkgJSB0aGlzLiRpdGVtcy5sZW5ndGhcbiAgICAgIHJldHVybiB0aGlzLiRpdGVtcy5lcShpdGVtSW5kZXgpXG4gICAgfVxuICBcbiAgICBDYXJvdXNlbC5wcm90b3R5cGUudG8gPSBmdW5jdGlvbiAocG9zKSB7XG4gICAgICB2YXIgdGhhdCAgICAgICAgPSB0aGlzXG4gICAgICB2YXIgYWN0aXZlSW5kZXggPSB0aGlzLmdldEl0ZW1JbmRleCh0aGlzLiRhY3RpdmUgPSB0aGlzLiRlbGVtZW50LmZpbmQoJy5pdGVtLmFjdGl2ZScpKVxuICBcbiAgICAgIGlmIChwb3MgPiAodGhpcy4kaXRlbXMubGVuZ3RoIC0gMSkgfHwgcG9zIDwgMCkgcmV0dXJuXG4gIFxuICAgICAgaWYgKHRoaXMuc2xpZGluZykgICAgICAgcmV0dXJuIHRoaXMuJGVsZW1lbnQub25lKCdzbGlkLmJzLmNhcm91c2VsJywgZnVuY3Rpb24gKCkgeyB0aGF0LnRvKHBvcykgfSkgLy8geWVzLCBcInNsaWRcIlxuICAgICAgaWYgKGFjdGl2ZUluZGV4ID09IHBvcykgcmV0dXJuIHRoaXMucGF1c2UoKS5jeWNsZSgpXG4gIFxuICAgICAgcmV0dXJuIHRoaXMuc2xpZGUocG9zID4gYWN0aXZlSW5kZXggPyAnbmV4dCcgOiAncHJldicsIHRoaXMuJGl0ZW1zLmVxKHBvcykpXG4gICAgfVxuICBcbiAgICBDYXJvdXNlbC5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgZSB8fCAodGhpcy5wYXVzZWQgPSB0cnVlKVxuICBcbiAgICAgIGlmICh0aGlzLiRlbGVtZW50LmZpbmQoJy5uZXh0LCAucHJldicpLmxlbmd0aCAmJiAkLnN1cHBvcnQudHJhbnNpdGlvbikge1xuICAgICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kKVxuICAgICAgICB0aGlzLmN5Y2xlKHRydWUpXG4gICAgICB9XG4gIFxuICAgICAgdGhpcy5pbnRlcnZhbCA9IGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbClcbiAgXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH1cbiAgXG4gICAgQ2Fyb3VzZWwucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5zbGlkaW5nKSByZXR1cm5cbiAgICAgIHJldHVybiB0aGlzLnNsaWRlKCduZXh0JylcbiAgICB9XG4gIFxuICAgIENhcm91c2VsLnByb3RvdHlwZS5wcmV2ID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMuc2xpZGluZykgcmV0dXJuXG4gICAgICByZXR1cm4gdGhpcy5zbGlkZSgncHJldicpXG4gICAgfVxuICBcbiAgICBDYXJvdXNlbC5wcm90b3R5cGUuc2xpZGUgPSBmdW5jdGlvbiAodHlwZSwgbmV4dCkge1xuICAgICAgdmFyICRhY3RpdmUgICA9IHRoaXMuJGVsZW1lbnQuZmluZCgnLml0ZW0uYWN0aXZlJylcbiAgICAgIHZhciAkbmV4dCAgICAgPSBuZXh0IHx8IHRoaXMuZ2V0SXRlbUZvckRpcmVjdGlvbih0eXBlLCAkYWN0aXZlKVxuICAgICAgdmFyIGlzQ3ljbGluZyA9IHRoaXMuaW50ZXJ2YWxcbiAgICAgIHZhciBkaXJlY3Rpb24gPSB0eXBlID09ICduZXh0JyA/ICdsZWZ0JyA6ICdyaWdodCdcbiAgICAgIHZhciB0aGF0ICAgICAgPSB0aGlzXG4gIFxuICAgICAgaWYgKCRuZXh0Lmhhc0NsYXNzKCdhY3RpdmUnKSkgcmV0dXJuICh0aGlzLnNsaWRpbmcgPSBmYWxzZSlcbiAgXG4gICAgICB2YXIgcmVsYXRlZFRhcmdldCA9ICRuZXh0WzBdXG4gICAgICB2YXIgc2xpZGVFdmVudCA9ICQuRXZlbnQoJ3NsaWRlLmJzLmNhcm91c2VsJywge1xuICAgICAgICByZWxhdGVkVGFyZ2V0OiByZWxhdGVkVGFyZ2V0LFxuICAgICAgICBkaXJlY3Rpb246IGRpcmVjdGlvblxuICAgICAgfSlcbiAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihzbGlkZUV2ZW50KVxuICAgICAgaWYgKHNsaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVyblxuICBcbiAgICAgIHRoaXMuc2xpZGluZyA9IHRydWVcbiAgXG4gICAgICBpc0N5Y2xpbmcgJiYgdGhpcy5wYXVzZSgpXG4gIFxuICAgICAgaWYgKHRoaXMuJGluZGljYXRvcnMubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuJGluZGljYXRvcnMuZmluZCgnLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxuICAgICAgICB2YXIgJG5leHRJbmRpY2F0b3IgPSAkKHRoaXMuJGluZGljYXRvcnMuY2hpbGRyZW4oKVt0aGlzLmdldEl0ZW1JbmRleCgkbmV4dCldKVxuICAgICAgICAkbmV4dEluZGljYXRvciAmJiAkbmV4dEluZGljYXRvci5hZGRDbGFzcygnYWN0aXZlJylcbiAgICAgIH1cbiAgXG4gICAgICB2YXIgc2xpZEV2ZW50ID0gJC5FdmVudCgnc2xpZC5icy5jYXJvdXNlbCcsIHsgcmVsYXRlZFRhcmdldDogcmVsYXRlZFRhcmdldCwgZGlyZWN0aW9uOiBkaXJlY3Rpb24gfSkgLy8geWVzLCBcInNsaWRcIlxuICAgICAgaWYgKCQuc3VwcG9ydC50cmFuc2l0aW9uICYmIHRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoJ3NsaWRlJykpIHtcbiAgICAgICAgJG5leHQuYWRkQ2xhc3ModHlwZSlcbiAgICAgICAgJG5leHRbMF0ub2Zmc2V0V2lkdGggLy8gZm9yY2UgcmVmbG93XG4gICAgICAgICRhY3RpdmUuYWRkQ2xhc3MoZGlyZWN0aW9uKVxuICAgICAgICAkbmV4dC5hZGRDbGFzcyhkaXJlY3Rpb24pXG4gICAgICAgICRhY3RpdmVcbiAgICAgICAgICAub25lKCdic1RyYW5zaXRpb25FbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkbmV4dC5yZW1vdmVDbGFzcyhbdHlwZSwgZGlyZWN0aW9uXS5qb2luKCcgJykpLmFkZENsYXNzKCdhY3RpdmUnKVxuICAgICAgICAgICAgJGFjdGl2ZS5yZW1vdmVDbGFzcyhbJ2FjdGl2ZScsIGRpcmVjdGlvbl0uam9pbignICcpKVxuICAgICAgICAgICAgdGhhdC5zbGlkaW5nID0gZmFsc2VcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICB0aGF0LiRlbGVtZW50LnRyaWdnZXIoc2xpZEV2ZW50KVxuICAgICAgICAgICAgfSwgMClcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5lbXVsYXRlVHJhbnNpdGlvbkVuZChDYXJvdXNlbC5UUkFOU0lUSU9OX0RVUkFUSU9OKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGFjdGl2ZS5yZW1vdmVDbGFzcygnYWN0aXZlJylcbiAgICAgICAgJG5leHQuYWRkQ2xhc3MoJ2FjdGl2ZScpXG4gICAgICAgIHRoaXMuc2xpZGluZyA9IGZhbHNlXG4gICAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihzbGlkRXZlbnQpXG4gICAgICB9XG4gIFxuICAgICAgaXNDeWNsaW5nICYmIHRoaXMuY3ljbGUoKVxuICBcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuICBcbiAgXG4gICAgLy8gQ0FST1VTRUwgUExVR0lOIERFRklOSVRJT05cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBcbiAgICBmdW5jdGlvbiBQbHVnaW4ob3B0aW9uKSB7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyICR0aGlzICAgPSAkKHRoaXMpXG4gICAgICAgIHZhciBkYXRhICAgID0gJHRoaXMuZGF0YSgnYnMuY2Fyb3VzZWwnKVxuICAgICAgICB2YXIgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBDYXJvdXNlbC5ERUZBVUxUUywgJHRoaXMuZGF0YSgpLCB0eXBlb2Ygb3B0aW9uID09ICdvYmplY3QnICYmIG9wdGlvbilcbiAgICAgICAgdmFyIGFjdGlvbiAgPSB0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnID8gb3B0aW9uIDogb3B0aW9ucy5zbGlkZVxuICBcbiAgICAgICAgaWYgKCFkYXRhKSAkdGhpcy5kYXRhKCdicy5jYXJvdXNlbCcsIChkYXRhID0gbmV3IENhcm91c2VsKHRoaXMsIG9wdGlvbnMpKSlcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ251bWJlcicpIGRhdGEudG8ob3B0aW9uKVxuICAgICAgICBlbHNlIGlmIChhY3Rpb24pIGRhdGFbYWN0aW9uXSgpXG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMuaW50ZXJ2YWwpIGRhdGEucGF1c2UoKS5jeWNsZSgpXG4gICAgICB9KVxuICAgIH1cbiAgXG4gICAgdmFyIG9sZCA9ICQuZm4uY2Fyb3VzZWxcbiAgXG4gICAgJC5mbi5jYXJvdXNlbCAgICAgICAgICAgICA9IFBsdWdpblxuICAgICQuZm4uY2Fyb3VzZWwuQ29uc3RydWN0b3IgPSBDYXJvdXNlbFxuICBcbiAgXG4gICAgLy8gQ0FST1VTRUwgTk8gQ09ORkxJQ1RcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PVxuICBcbiAgICAkLmZuLmNhcm91c2VsLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAkLmZuLmNhcm91c2VsID0gb2xkXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH1cbiAgXG4gIFxuICAgIC8vIENBUk9VU0VMIERBVEEtQVBJXG4gICAgLy8gPT09PT09PT09PT09PT09PT1cbiAgXG4gICAgdmFyIGNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgaHJlZlxuICAgICAgdmFyICR0aGlzICAgPSAkKHRoaXMpXG4gICAgICB2YXIgJHRhcmdldCA9ICQoJHRoaXMuYXR0cignZGF0YS10YXJnZXQnKSB8fCAoaHJlZiA9ICR0aGlzLmF0dHIoJ2hyZWYnKSkgJiYgaHJlZi5yZXBsYWNlKC8uKig/PSNbXlxcc10rJCkvLCAnJykpIC8vIHN0cmlwIGZvciBpZTdcbiAgICAgIGlmICghJHRhcmdldC5oYXNDbGFzcygnY2Fyb3VzZWwnKSkgcmV0dXJuXG4gICAgICB2YXIgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCAkdGFyZ2V0LmRhdGEoKSwgJHRoaXMuZGF0YSgpKVxuICAgICAgdmFyIHNsaWRlSW5kZXggPSAkdGhpcy5hdHRyKCdkYXRhLXNsaWRlLXRvJylcbiAgICAgIGlmIChzbGlkZUluZGV4KSBvcHRpb25zLmludGVydmFsID0gZmFsc2VcbiAgXG4gICAgICBQbHVnaW4uY2FsbCgkdGFyZ2V0LCBvcHRpb25zKVxuICBcbiAgICAgIGlmIChzbGlkZUluZGV4KSB7XG4gICAgICAgICR0YXJnZXQuZGF0YSgnYnMuY2Fyb3VzZWwnKS50byhzbGlkZUluZGV4KVxuICAgICAgfVxuICBcbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIH1cbiAgXG4gICAgJChkb2N1bWVudClcbiAgICAgIC5vbignY2xpY2suYnMuY2Fyb3VzZWwuZGF0YS1hcGknLCAnW2RhdGEtc2xpZGVdJywgY2xpY2tIYW5kbGVyKVxuICAgICAgLm9uKCdjbGljay5icy5jYXJvdXNlbC5kYXRhLWFwaScsICdbZGF0YS1zbGlkZS10b10nLCBjbGlja0hhbmRsZXIpXG4gIFxuICAgICQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICQoJ1tkYXRhLXJpZGU9XCJjYXJvdXNlbFwiXScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgJGNhcm91c2VsID0gJCh0aGlzKVxuICAgICAgICBQbHVnaW4uY2FsbCgkY2Fyb3VzZWwsICRjYXJvdXNlbC5kYXRhKCkpXG4gICAgICB9KVxuICAgIH0pXG4gIFxuICB9KGpRdWVyeSk7XG4gIFxuICBcbiAgXG4gICQoJy5jYXJvdXNlbCcpLmNhcm91c2VsKHtcbiAgXHRpbnRlcnZhbDogMFxuICB9KTtcbiAgJCgnLmpzLWhpZGUtZmlsdGVyJykub24oJ2NsaWNrJyxmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciAkdGhpcyA9ICQoIHRoaXMgKTtcbiAgICBpZiAoICQoJy5maWx0ZXJfX2lucHV0LWdyb3VwLS1hZGQnKS5oYXNDbGFzcygnanMtaXNWaXNpYmxlJykgKSB7XG4gICAgICAkKCcuZmlsdGVyX19pbnB1dC1ncm91cC0tYWRkJykucmVtb3ZlQ2xhc3MoJ2pzLWlzVmlzaWJsZScpO1xuICAgICAgJHRoaXMuYWRkQ2xhc3MoJ2lTb3BlbmVkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICQoJy5maWx0ZXJfX2lucHV0LWdyb3VwLS1hZGQnKS5hZGRDbGFzcygnanMtaXNWaXNpYmxlJyk7ICAgICAgXG4gICAgICAkdGhpcy5yZW1vdmVDbGFzcygnaVNvcGVuZWQnKTtcbiAgICB9XG4gIH0pO1xuICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpICE9PSBudWxsKSB7XG4gIC8vICAgZnVuY3Rpb24gbWFwU2l6ZSgpe1xuICAvLyAgICAgdmFyIG1hcFBvcyA9ICQoJyNtYXAnKS5vZmZzZXQoKS50b3A7XG4gIC8vICAgICB2YXIgd2luSGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xuICAvLyAgICAgdmFyIG1hcEhlaWdodCA9IHdpbkhlaWdodCAtIG1hcFBvcztcbiAgLy8gICAgIC8vIGNvbnNvbGUubG9nKHdpbkhlaWdodCk7XG4gIC8vICAgICAkKCcjbWFwJykuY3NzKCdoZWlnaHQnLCBtYXBIZWlnaHQpO1xuICAvLyAgIH07XG4gIFxuICAvLyAgIG1hcFNpemUoKTtcbiAgXG4gIC8vICAgJCggd2luZG93ICkucmVzaXplKGZ1bmN0aW9uKCkge1xuICAvLyAgICAgbWFwU2l6ZSgpO1xuICAvLyAgIH0pO1xuICBcbiAgICAvLyDQpNGD0L3QutGG0LjRjyB5bWFwcy5yZWFkeSgpINCx0YPQtNC10YIg0LLRi9C30LLQsNC90LAsINC60L7Qs9C00LBcbiAgICAvLyDQt9Cw0LPRgNGD0LfRj9GC0YHRjyDQstGB0LUg0LrQvtC80L/QvtC90LXQvdGC0YsgQVBJLCDQsCDRgtCw0LrQttC1INC60L7Qs9C00LAg0LHRg9C00LXRgiDQs9C+0YLQvtCy0L4gRE9NLdC00LXRgNC10LLQvi5cbiAgICB5bWFwcy5yZWFkeShpbml0KTtcbiAgICBmdW5jdGlvbiBpbml0KCl7IFxuICAgICAgICAvLyDQodC+0LfQtNCw0L3QuNC1INC60LDRgNGC0YsuICAgIFxuICAgICAgICB2YXIgbXlNYXAgPSBuZXcgeW1hcHMuTWFwKFwibWFwXCIsIHtcbiAgICAgICAgICAgIC8vINCa0L7QvtGA0LTQuNC90LDRgtGLINGG0LXQvdGC0YDQsCDQutCw0YDRgtGLLlxuICAgICAgICAgICAgLy8g0J/QvtGA0Y/QtNC+0Log0L/QviDRg9C80L7Qu9GH0L3QuNGOOiDCq9GI0LjRgNC+0YLQsCwg0LTQvtC70LPQvtGC0LDCuy5cbiAgICAgICAgICAgIC8vINCn0YLQvtCx0Ysg0L3QtSDQvtC/0YDQtdC00LXQu9GP0YLRjCDQutC+0L7RgNC00LjQvdCw0YLRiyDRhtC10L3RgtGA0LAg0LrQsNGA0YLRiyDQstGA0YPRh9C90YPRjixcbiAgICAgICAgICAgIC8vINCy0L7RgdC/0L7Qu9GM0LfRg9C50YLQtdGB0Ywg0LjQvdGB0YLRgNGD0LzQtdC90YLQvtC8INCe0L/RgNC10LTQtdC70LXQvdC40LUg0LrQvtC+0YDQtNC40L3QsNGCLlxuICAgICAgICAgICAgY2VudGVyOiBbNTUuNzYsIDM3LjY0XSxcbiAgICAgICAgICAgIC8vINCj0YDQvtCy0LXQvdGMINC80LDRgdGI0YLQsNCx0LjRgNC+0LLQsNC90LjRjy4g0JTQvtC/0YPRgdGC0LjQvNGL0LUg0LfQvdCw0YfQtdC90LjRjzpcbiAgICAgICAgICAgIC8vINC+0YIgMCAo0LLQtdGB0Ywg0LzQuNGAKSDQtNC+IDE5LlxuICAgICAgICAgICAgem9vbTogMTgsXG4gICAgICAgICAgICBjb250cm9sczogW11cbiAgICAgICAgfSk7XG4gICAgfVxuICB9XG4gICQoJy5qcy10YWJfX2l0ZW0nKS5vbignY2xpY2snLGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgJHRoaXMgPSAkKCB0aGlzICk7XG4gIFxuICAgICR0aGlzLmNsb3Nlc3QoJy50YWInKS5maW5kKCcuanMtdGFiX19pdGVtJykucmVtb3ZlQ2xhc3MoJ2pzLWFjdGl2ZScpO1xuICAgICR0aGlzLmFkZENsYXNzKCdqcy1hY3RpdmUnKTtcbiAgXG4gICAgdmFyIHZhbCA9ICR0aGlzLmF0dHIoJ2RhdGEtdGFiJyk7ICAgIFxuICBcbiAgICAkdGhpcy5jbG9zZXN0KCcudGFiJykuZmluZCgnLnRhYl9fYmxvY2snKS5yZW1vdmVDbGFzcygnanMtYWN0aXZlJyk7XG4gICAgJChcIiNcIit2YWwpLmFkZENsYXNzKCdqcy1hY3RpdmUnKTtcbiAgfSk7XG59KSJdfQ==
